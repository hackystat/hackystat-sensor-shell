<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_07) on Sun Dec 02 20:29:57 HST 2007 -->
<TITLE>
Shell (hackystat-sensor-shell API)
</TITLE>

<META NAME="keywords" CONTENT="org.hackystat.sensorshell.Shell interface">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="Shell (hackystat-sensor-shell API)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/Shell.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/hackystat/sensorshell/SensorShellProperties.html" title="class in org.hackystat.sensorshell"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/hackystat/sensorshell/SingleSensorShell.html" title="class in org.hackystat.sensorshell"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/hackystat/sensorshell/Shell.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Shell.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.hackystat.sensorshell</FONT>
<BR>
Interface Shell</H2>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../../org/hackystat/sensorshell/MultiSensorShell.html" title="class in org.hackystat.sensorshell">MultiSensorShell</A>, <A HREF="../../../org/hackystat/sensorshell/SensorShell.html" title="class in org.hackystat.sensorshell">SensorShell</A>, <A HREF="../../../org/hackystat/sensorshell/SingleSensorShell.html" title="class in org.hackystat.sensorshell">SingleSensorShell</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <A HREF="../../../src-html/org/hackystat/sensorshell/Shell.html#line.26"><B>Shell</B></A></DL>
</PRE>

<P>
An interface that is implemented by SensorShell and MultiSensorShell. This enables
 sensors that can restrict themselves to the use of the following public methods to
 easily toggle between the use of SensorShell or MultiSensorShell depending upon 
 load requirements.
 
 As a simple example, a sensor might contain code similar to the following:
 <pre>
 boolean useMulti = isMultiSensorShellRequested();
 Shell shell = (useMulti) ? new MultiSensorShell(...) : new SensorShell(...);
  :
 shell.add(...)
  :
 shell.quit()
 </pre>
 Thus, the decision to use a SensorShell vs. a MultiSensorShell can be made at run-time.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Philip Johnson</DD>
</DL>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/hackystat/sensorshell/Shell.html#add(java.util.Map)">add</A></B>(java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;keyValMap)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Converts the values in the KeyValMap to a SensorData instance and adds it to the
 Shell.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/hackystat/sensorshell/Shell.html#add(org.hackystat.sensorbase.resource.sensordata.jaxb.SensorData)">add</A></B>(org.hackystat.sensorbase.resource.sensordata.jaxb.SensorData&nbsp;sensorData)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds the passed SensorData instance to the Shell.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/hackystat/sensorshell/SensorShellProperties.html" title="class in org.hackystat.sensorshell">SensorShellProperties</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/hackystat/sensorshell/Shell.html#getProperties()">getProperties</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the SensorShell properties instance used to create this SensorShell.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/hackystat/sensorshell/Shell.html#ping()">ping</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if the host can be pinged and the email/password combination is valid.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/hackystat/sensorshell/Shell.html#quit()">quit</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Invokes quit() on this Shell, which invokes a final send() and closes any
 logging files.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/hackystat/sensorshell/Shell.html#send()">send</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Immediately invokes send() on this Shell.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/hackystat/sensorshell/Shell.html#statechange(long, java.util.Map)">statechange</A></B>(long&nbsp;resourceCheckSum,
                       java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;keyValMap)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Implements the "StateChange" algorithm.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="add(org.hackystat.sensorbase.resource.sensordata.jaxb.SensorData)"><!-- --></A><H3>
add</H3>
<PRE>
void <A HREF="../../../src-html/org/hackystat/sensorshell/Shell.html#line.34"><B>add</B></A>(org.hackystat.sensorbase.resource.sensordata.jaxb.SensorData&nbsp;sensorData)
         throws <A HREF="../../../org/hackystat/sensorshell/SensorShellException.html" title="class in org.hackystat.sensorshell">SensorShellException</A></PRE>
<DL>
<DD>Adds the passed SensorData instance to the Shell.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sensorData</CODE> - The SensorData instance to be queued for transmission.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../org/hackystat/sensorshell/SensorShellException.html" title="class in org.hackystat.sensorshell">SensorShellException</A></CODE> - If problems occur sending the data.</DL>
</DD>
</DL>
<HR>

<A NAME="add(java.util.Map)"><!-- --></A><H3>
add</H3>
<PRE>
void <A HREF="../../../src-html/org/hackystat/sensorshell/Shell.html#line.47"><B>add</B></A>(java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;keyValMap)
         throws <A HREF="../../../org/hackystat/sensorshell/SensorShellException.html" title="class in org.hackystat.sensorshell">SensorShellException</A></PRE>
<DL>
<DD>Converts the values in the KeyValMap to a SensorData instance and adds it to the
 Shell. Owner will default to the hackystat user in the sensor.properties file.
 Timestamp and Runtime will default to the current time.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>keyValMap</CODE> - The map of key-value pairs.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../org/hackystat/sensorshell/SensorShellException.html" title="class in org.hackystat.sensorshell">SensorShellException</A></CODE> - If the Map cannot be translated into SensorData, 
 typically because a value
 was passed for Timestamp or Runtime that could not be parsed into XMLGregorianCalendar.
 Or if problems occur sending the data.</DL>
</DD>
</DL>
<HR>

<A NAME="ping()"><!-- --></A><H3>
ping</H3>
<PRE>
boolean <A HREF="../../../src-html/org/hackystat/sensorshell/Shell.html#line.54"><B>ping</B></A>()</PRE>
<DL>
<DD>Returns true if the host can be pinged and the email/password combination is valid.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>True if the host can be pinged and the user credentials are valid.</DL>
</DD>
</DL>
<HR>

<A NAME="send()"><!-- --></A><H3>
send</H3>
<PRE>
int <A HREF="../../../src-html/org/hackystat/sensorshell/Shell.html#line.64"><B>send</B></A>()
         throws <A HREF="../../../org/hackystat/sensorshell/SensorShellException.html" title="class in org.hackystat.sensorshell">SensorShellException</A></PRE>
<DL>
<DD>Immediately invokes send() on this Shell. Note that you will rarely want
 to invoke this method. Instead, during normal operation you will rely on the
 autoSendTimeInterval to invoke send() in a separate thread, and then invoke quit() to invoke
 send() at the conclusion of the run.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>The total number of instances sent by Shell.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../org/hackystat/sensorshell/SensorShellException.html" title="class in org.hackystat.sensorshell">SensorShellException</A></CODE> - If problems occur sending the data.</DL>
</DD>
</DL>
<HR>

<A NAME="quit()"><!-- --></A><H3>
quit</H3>
<PRE>
void <A HREF="../../../src-html/org/hackystat/sensorshell/Shell.html#line.70"><B>quit</B></A>()</PRE>
<DL>
<DD>Invokes quit() on this Shell, which invokes a final send() and closes any
 logging files.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="statechange(long, java.util.Map)"><!-- --></A><H3>
statechange</H3>
<PRE>
void <A HREF="../../../src-html/org/hackystat/sensorshell/Shell.html#line.91"><B>statechange</B></A>(long&nbsp;resourceCheckSum,
                 java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;keyValMap)
                 throws java.lang.Exception</PRE>
<DL>
<DD>Implements the "StateChange" algorithm.  The goal of StateChange is to add a new SensorData
 instance for sending to the SensorBase only when "something has changed" in the tool (which
 is typically an interactive editor or IDE). This method is designed to be used in conjunction
 with a timer-based process in the sensor client.  The timer-based process should wake up 
 at regular intervals, determine the currently "active" resource (typically a file), and 
 compute a "checksum" for that resource representing its state. (This checksum is typically
 the size of the resource in bytes or characters.) Having obtained those two values, the 
 sensor client can then create a keyValMap as if it were going to do a regular Add command,
 and invoke this method with it as well as with the resourceCheckSum.  This method keeps
 track of the last Resource and last ResourceCheckSum provided to it, and if either has
 changed, it will automatically invoke the Add command, passing the keyValMap to it. 
 <p>
 Thus, if an editor is running but the user is out at lunch, repeated invocations of the 
 StateChange method will not result in any new data being sent to the server.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>resourceCheckSum</CODE> - An integer representing the state of the Resource.<DD><CODE>keyValMap</CODE> - A map of key-value pairs representing sensor data fields and properties.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - If problems occur during the Add (if the Add actually occurs.)</DL>
</DD>
</DL>
<HR>

<A NAME="getProperties()"><!-- --></A><H3>
getProperties</H3>
<PRE>
<A HREF="../../../org/hackystat/sensorshell/SensorShellProperties.html" title="class in org.hackystat.sensorshell">SensorShellProperties</A> <A HREF="../../../src-html/org/hackystat/sensorshell/Shell.html#line.98"><B>getProperties</B></A>()</PRE>
<DL>
<DD>Returns the SensorShell properties instance used to create this SensorShell.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>The SensorShellProperties instance.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/Shell.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/hackystat/sensorshell/SensorShellProperties.html" title="class in org.hackystat.sensorshell"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/hackystat/sensorshell/SingleSensorShell.html" title="class in org.hackystat.sensorshell"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/hackystat/sensorshell/Shell.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Shell.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
