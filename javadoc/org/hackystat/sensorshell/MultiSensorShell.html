<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_07) on Sun Sep 23 12:42:05 HST 2007 -->
<TITLE>
MultiSensorShell (hackystat-sensor-shell API)
</TITLE>

<META NAME="keywords" CONTENT="org.hackystat.sensorshell.MultiSensorShell class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="MultiSensorShell (hackystat-sensor-shell API)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/MultiSensorShell.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/hackystat/sensorshell/ExtensionFileFilter.html" title="class in org.hackystat.sensorshell"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/hackystat/sensorshell/OfflineManager.html" title="class in org.hackystat.sensorshell"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/hackystat/sensorshell/MultiSensorShell.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="MultiSensorShell.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.hackystat.sensorshell</FONT>
<BR>
Class MultiSensorShell</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>org.hackystat.sensorshell.MultiSensorShell</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <A HREF="../../../src-html/org/hackystat/sensorshell/MultiSensorShell.html#line.52"><B>MultiSensorShell</B></A><DT>extends java.lang.Object</DL>
</PRE>

<P>
MultiSensorShell is an experimental class designed to explore performance optimization of 
 sensor data transmission.  MultiSensorShell is designed to explore the premise that one way to
 improve the throughput of sensor data transmission is to create multiple SensorShells that 
 are all sending data to a single SensorBase simultaneously.
 <p> 
 When instantiating a MultiSensorShell, you specify the number of SensorShells to be created, the
 number of SensorData instances to be sent to a single SensorShell before moving on to the next
 SensorShell (the "batchSize"), and the autoSendInterval for each SensorShell. Since the 
 AutoSend facility in SensorShell creates a separate thread, this enables a simple form of
 concurrency: it is possible for one SensorShell to be sending its data while the MultiSensorShell
 is adding data to another SensorShell. 
 <p>
 The main() method provides a simple experimental interface.  To use it, bring up a SensorBase.
 Then invoke the main() method, editing the initial local variables as you wish. The system
 will run, printing out the elapsed time in milliseconds required for each add() of an 
 individual SensorData instance.  At the end of the run, it will print out the total elapsed
 time and the average time to send each SensorData instance to the server.  Note that I have
 seen a variance of around 0.5 milliseconds in the average time per instance send. So, for
 example, when repeatedly running under the same settings, I have obtained values 
 varying between 3.1 to about 3.7 milliseconds per instance.  This is with totalData = 5000.
 It appears that the variance decreases if you increase totalData to about 50,000. At that 
 point, I get relatively consistent throughput of around 2.8 milliseconds per instance. 
 <p>
 If you instantiate a MultiSensorShell with the number of SensorShells set to 1, you effectively
 get the default case.  In this situation, I have found that the average time to send a 
 single SensorData instance is approximately 6 milliseconds, almost independent of the 
 settings for batchSize and the autoSendInterval.   By increasing the number of SensorShell
 instances to 5, I can double the throughput, to approximately 3 milliseconds per instance. At
 this point, some kind of performance plateau is reached, and I have not yet been able to 
 improve the performance further via manipulation of these variables.  I do not know whether
 this is a "real" limit or an artificial limit imposed by my running both client and server
 on the same system (a MacBook Pro). 
 <p>
 My best throughput has been achieved with totalData = 50,000; numShells = 10; autoSendInterval
 = 0.05; and batchSize = 200. Under these conditions, I get 2.8 milliseconds per instance, or 
 around 360 instances per second throughput.  I've done a run with totalData = 500,000 without
 problems and with a sustained throughput of 2.8 milliseconds/instance.   
 <p>
 I'm also finding I can store around 350,000 sensor data instances per GB of disk space.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Philip Johnson</DD>
</DL>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../org/hackystat/sensorshell/MultiSensorShell.html#MultiSensorShell(org.hackystat.sensorshell.SensorProperties, double, int, int)">MultiSensorShell</A></B>(<A HREF="../../../org/hackystat/sensorshell/SensorProperties.html" title="class in org.hackystat.sensorshell">SensorProperties</A>&nbsp;properties,
                                 double&nbsp;autoSendTimeInterval,
                                 int&nbsp;numShells,
                                 int&nbsp;batchSize)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new MultiSensorShell for concurrent transmission of SensorData instances to a 
 SensorBase.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/hackystat/sensorshell/MultiSensorShell.html#add(org.hackystat.sensorbase.resource.sensordata.jaxb.SensorData)">add</A></B>(org.hackystat.sensorbase.resource.sensordata.jaxb.SensorData&nbsp;sensorData)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds the passed SensorData instance to one of the internal SensorShells.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/hackystat/sensorshell/MultiSensorShell.html#main(java.lang.String[])">main</A></B>(java.lang.String[]&nbsp;args)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A simple main class that illustrates how to invoke the MultiSensorShell to explore 
 performance improvements related to throughput of SensorData instances.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/hackystat/sensorshell/MultiSensorShell.html#send()">send</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Invokes send() on all of the internal SensorShells.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="MultiSensorShell(org.hackystat.sensorshell.SensorProperties, double, int, int)"><!-- --></A><H3>
MultiSensorShell</H3>
<PRE>
public <A HREF="../../../src-html/org/hackystat/sensorshell/MultiSensorShell.html#line.73"><B>MultiSensorShell</B></A>(<A HREF="../../../org/hackystat/sensorshell/SensorProperties.html" title="class in org.hackystat.sensorshell">SensorProperties</A>&nbsp;properties,
                        double&nbsp;autoSendTimeInterval,
                        int&nbsp;numShells,
                        int&nbsp;batchSize)
                 throws java.lang.Exception</PRE>
<DL>
<DD>Creates a new MultiSensorShell for concurrent transmission of SensorData instances to a 
 SensorBase.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>properties</CODE> - A SensorProperties instance.<DD><CODE>autoSendTimeInterval</CODE> - The time in minutes between autoSends for each shell.<DD><CODE>numShells</CODE> - The total number of SensorShell instances to create.<DD><CODE>batchSize</CODE> - The number of SensorData instances to send in a row to a single SensorShell.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - If problems occur.</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="add(org.hackystat.sensorbase.resource.sensordata.jaxb.SensorData)"><!-- --></A><H3>
add</H3>
<PRE>
public void <A HREF="../../../src-html/org/hackystat/sensorshell/MultiSensorShell.html#line.91"><B>add</B></A>(org.hackystat.sensorbase.resource.sensordata.jaxb.SensorData&nbsp;sensorData)</PRE>
<DL>
<DD>Adds the passed SensorData instance to one of the internal SensorShells.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sensorData</CODE> - The SensorData instance to be queued for transmission.</DL>
</DD>
</DL>
<HR>

<A NAME="send()"><!-- --></A><H3>
send</H3>
<PRE>
public void <A HREF="../../../src-html/org/hackystat/sensorshell/MultiSensorShell.html#line.111"><B>send</B></A>()</PRE>
<DL>
<DD>Invokes send() on all of the internal SensorShells. Call this at the end of a run to 
 ensure that all of the buffered data has been sent.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="main(java.lang.String[])"><!-- --></A><H3>
main</H3>
<PRE>
public static void <A HREF="../../../src-html/org/hackystat/sensorshell/MultiSensorShell.html#line.149"><B>main</B></A>(java.lang.String[]&nbsp;args)
                 throws java.lang.Exception</PRE>
<DL>
<DD>A simple main class that illustrates how to invoke the MultiSensorShell to explore 
 performance improvements related to throughput of SensorData instances.  The idea is 
 bring up a local SensorBase, edit the local variables of this method, then run this 
 main() to see how fast you can transmit the SensorData to the SensorBase.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>args</CODE> - Ignored.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - If things go wrong.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/MultiSensorShell.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/hackystat/sensorshell/ExtensionFileFilter.html" title="class in org.hackystat.sensorshell"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/hackystat/sensorshell/OfflineManager.html" title="class in org.hackystat.sensorshell"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/hackystat/sensorshell/MultiSensorShell.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="MultiSensorShell.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
